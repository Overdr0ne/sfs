#+TITLE: SFS (Search File System)

* Introduction
SFS is a collection of inter-operating tools to make accessing and organizing your data faster and more ergonomic.
* Installation
Install the python dependencies:
#+begin_src
sudo pip3 install dbus-python PyGObject
#+end_src
* sfs-recoll
sfs-recoll is an interface to Recoll for Emacs. Recoll search queries are forwarded to a search service, and the results are used to populate a dired buffer.

[[./sfs-demo.gif]]

** Indexing
Before you can search, you must index your filesystem with the program *recollindex*. There are a number of options here, but basically you can do this [[https://www.lesbonscomptes.com/recoll/usermanual/webhelp/docs/RCL.INDEXING.PERIODIC.html][periodically]], or in [[https://www.lesbonscomptes.com/recoll/usermanual/webhelp/docs/RCL.INDEXING.MONITOR.html][real time]], updating the index every time a file is modified!
I simply used *recollindex* initially without options to build the inital index, then put *recollindex -m* in my .xinitrc to monitor changes.
** Search Queries
Run a search in emacs simply with:
#+begin_src
sfs-recoll
#+end_src
Get metadata with either
#+begin_src
sfs-recoll
#+end_src

Recoll search queries are fully documented [[https://www.lesbonscomptes.com/recoll/usermanual/webhelp/docs/RCL.SEARCH.LANG.html][here]]. The syntax is very similar to an internet search engine.

You can search for keywords individually:
#+begin_src
Query: keywords to look for in the index
#+end_src
Or clustered phrases:
#+begin_src
Query: "keywords to look" for in "the index"
#+end_src
Recoll also recognizes certain field names:
#+begin_src
Query: filename:test OR filename:bla ext:c dir:home -dir:bin size<10000 date:2001-03-01/2021-05-01
#+end_src
So this gives me files with test or bla in the filename, .c files, home somewhere in the path, bin nowhere in the path, files less than 10000 bytes, and dated between 2001-03-01 and 2021-05-01.

The full list of field names for convenience:
- *title*, *subject* or *caption* are synonyms which specify data to be searched for in the document title or subject.
- *author* or *from* for searching the documents originators.
- *recipient* or *to* for searching the documents recipients.
- *keyword* for searching the document-specified keywords (few documents actually have any).
- *filename* for the document's file name.
- *containerfilename*. This is set for all documents, both top-level and contained sub-documents, and is always the name of the filesystem directory entry which contains the data.
- *ext* specifies the file name extension (Ex: ext:html)
- *dir* for filtering the results on file location
- *size* for filtering the results on file size.
- *date* for searching or filtering on dates.
- *mime* or *format* for specifying the MIME type.
- *type* or *rclcat* for specifying the category (as in text/media/presentation/etc.)
* sfs-tags
sfs-tags is a set of utilities for tagging your data, primarily unix files using extended attributes. In a dired directory, tag the file at point with
#+begin_src
sfs-tag-set
#+end_src
and dump the tag info with
#+begin_src
sfs-tag-get
#+end_src

* Todo
- Add a fancy start page with lots of suggested tag buttons, search history, help commands, etc. that can be conveniently added and removed and composed, sorta like a root directory, model it a bit like magit with really short keybindings.
- Iterative filtering of results so it feels more like you are navigating your file-system, but non-hierarchically!
- Cross-platform...
